---
title: "p8105_hw2_lcc2181"
output: github_document
---

## Problem 1

```{r, echo=FALSE, message=FALSE}
library(tidyverse)
library(readxl)
```

Reading and cleaning the Mr. Trash Wheel sheet.

```{r}
trash_wheel_df = 
  read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
  sheet = "Mr. Trash Wheel", 
  range = "A2:N408") %>%
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = round(sports_balls, digits = 0))
```

Reading and cleaning precipitation data for 2018.

```{r}
precip_2018_df = 
  read_excel ("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
             sheet = "2018 Precipitation",
             range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  drop_na(month) %>% 
  mutate(year = 2018)
                 
```

Reading and cleaning precipitation data for 2019.

```{r}
precip_2019_df = 
  read_excel ("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
             sheet = "2019 Precipitation",
             range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  drop_na(month) %>% 
  mutate(year = 2019)
```

Combining precipitation data sets.

```{r}
precipitation_df = 
  full_join(precip_2018_df, precip_2019_df) %>%
  mutate(month = recode(month, 
        `1`= "January", `2`= "February", `3`= "March", `4`= "April",
        `5`= "May", `6`= "June", `7`= "July", `8`= "August", 
        `9`=  "September", `10`= "October", `11`= "November", 
        `12`= "December")
    )
```

The number of observations in the cleaned Mr. Trash Wheel data is `r nrow(trash_wheel_df)`. There are `r ncol(trash_wheel_df)` variables in the cleaned Mr. Trash Wheel data. Examples of key variables are dumpster, month, year, date, and homes_powered. The median number of sports balls in a dumpster in 2019 was `r median(pull(filter(trash_wheel_df, year == 2019), sports_balls))`. The number of observations in the cleaned 2018 and 2019 precipitation data is `r nrow(precipitation_df)`. There are `r ncol(precipitation_df)` variables in the precipitation data, which are `r names(precipitation_df)`. The total precipitation in 2018 was `r sum(pull(filter(precipitation_df, year == 2018), total))`.

## Problem 2

Cleaning data in pols-months.csv

```{r}
pols_month_df =
  read_csv("data/pols-month.csv") %>% 
  separate(mon, into= c("year","month","day"), sep="-") %>% 
  mutate(
    year=as.integer(year),
    month=as.integer(month),
    day=as.integer(day)
  ) %>% 
  mutate(
    month = recode(month, 
        `1`= "January", `2`= "February", `3`= "March", `4`= "April",
        `5`= "May", `6`= "June", `7`= "July", `8`= "August", 
        `9`=  "September", `10`= "October", `11`= "November", 
        `12`= "December")
  ) %>% 
  mutate(
    president = recode(prez_gop, `1`= "gop", `0`= "dem" )
  ) %>% 
  select(-prez_gop, -prez_dem, -day)
```

Cleaning data in snp.csv

```{r}
snp_df =
  read_csv("data/snp.csv") %>% 
  mutate(date = as.Date(date, format = "%m/%d/%y")) %>% 
  separate(date, into = c("year","month","day"), sep = "-") %>% 
  mutate(
    year=as.integer(year),
    month=as.integer(month),
    day=as.integer(day)
  ) %>% 
  mutate(
    month = recode(month, 
        `1`= "January", `2`= "February", `3`= "March", `4`= "April",
        `5`= "May", `6`= "June", `7`= "July", `8`= "August", 
        `9`=  "September", `10`= "October", `11`= "November", 
        `12`= "December")
  ) %>% 
  relocate(year,month) %>% 
  select(-day)
```

Tidying data in unemployment.csv

```{r}
unemployment_df =
  read_csv("data/unemployment.csv") %>% 
  pivot_longer(Jan:Dec,
      names_to = "month",
      values_to = "unemployment"
 ) %>% 
  mutate(
    month = recode(month, 
        "Jan" = "January", "Feb" = "February", "Mar" = "March", "Apr"=    
        "April", "May" = "May", "Jun" = "June", "Jul" = "July", "Aug" =  
        "August", "Sep" =  "September", "Oct" = "October", "Nov" = 
        "November", "Dec" = "December")
  ) %>% 
  mutate(
    Year = as.integer(Year)
  ) %>% 
  janitor::clean_names()
  
```

Joining data sets by merging snp_df into pols_month_df, and then merging unemployment into result.

```{r}
pols_snp_df = 
  left_join(pols_month_df, snp_df, by = c("year", "month"))

fivethirtyeight_df =
  left_join(pols_snp_df, unemployment_df, by = c("year","month"))

```

The pols-month data contains information about the number of republican and democratic governors, senators, and representatives on the associated date as well as whether the president was republican and democratic. The snp data contains information about the closing values of the S&P stock index on the date associated. The unemployment data contains measurements of percentage of unemployment by month and year. The resulting merged data set has `r nrow(fivethirtyeight_df)` rows and `r ncol(fivethirtyeight_df)` columns. It ranges from the years `r min(pull(fivethirtyeight_df, year))` to `r max(pull(fivethirtyeight_df, year))`. The key variables in the resulting data set include year, month, president, close, and unemployment.

## Problem 3

Loading and tidying data from Popular_Baby_Names.csv

```{r}
baby_names_df =
  read_csv("data/Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    ethnicity = recode(ethnicity, 
    "BLACK NON HISP" = "BLACK NON HISPANIC", 
    "WHITE NON HISP" = "WHITE NON HISPANIC", 
    "ASIAN AND PACI" = "ASIAN AND PACIFIC ISLANDER")
  ) %>% 
  mutate(
    childs_first_name = str_to_title(childs_first_name)
  ) %>% 
  distinct()
```

